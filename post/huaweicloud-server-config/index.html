<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta content="yes" name="apple-mobile-web-app-capable" />
<meta content="black" name="apple-mobile-web-app-status-bar-style" />
<meta name="referrer" content="never">
<meta name="keywords" content="">
<meta name="description" content="欢迎访问[Jinvic&#39;s Blog]的个人博客">
<meta name="author" content="kveln">
<title>华为云服务器配置 | Jinvic&#39;s Blog</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">
<link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<link
  href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800'
  rel='stylesheet' type='text/css'>
<link rel="alternate" type="application/rss+xml" title="华为云服务器配置 | Jinvic&#39;s Blog » Feed"
  href="https://jinvic.github.io/atom.xml">
<link rel="stylesheet"
  href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/styles/androidstudio.min.css">
<link href="https://jinvic.github.io/styles/main.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/850552586/ericamcdn@0.1/css/live2d.css">

<script>hljs.initHighlightingOnLoad();</script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-YCF6X0GKYH"></script>
<script>window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments)
    }
    gtag('js', new Date());
    gtag('config', 'G-YCF6X0GKYH');</script>

  <meta property="og:description" content="华为云服务器配置" />
  <meta property="og:url" content="https://jinvic.github.io/post/huaweicloud-server-config/" />
  <meta property="og:locale" content="zh-CN" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Jinvic&#39;s Blog" />
  <!-- <script src="../assets/styles/scripts/tocScript.js"></script> -->
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="https://jinvic.github.io">Jinvic&#39;s Blog</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
      data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
      aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        
        <li class="nav-item">
          
          <a class="nav-link" href="/">首页</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/archives">归档</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/tags">标签</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/post/about">关于</a>
          
        </li>
        
        <li class="nav-item">
          <div class="gridea-search-container">
            <form id="gridea-search-form" style="position: relative" data-update="1750747815360"
              action="/search/index.html">
              <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
              <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
  <!-- Page Header -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="https://jinvic.github.io">Jinvic&#39;s Blog</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
      data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
      aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        
        <li class="nav-item">
          
          <a class="nav-link" href="/">首页</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/archives">归档</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/tags">标签</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/post/about">关于</a>
          
        </li>
        
        <li class="nav-item">
          <div class="gridea-search-container">
            <form id="gridea-search-form" style="position: relative" data-update="1750747815360"
              action="/search/index.html">
              <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
              <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
<header class="masthead" style="background-image: url('https://jinvic.github.io/media/images/home-bg.jpg')">
  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        
          <!-- 没Title为其他页面Header -->
          
            <!-- 没Title并且有headerType为Post：文章Header -->
            <div class="post-heading">
              <span class="tags">
                
                <a href="https://jinvic.github.io/tag/2caP3ZTldp/" class="tag">服务器</a>
                
                <a href="https://jinvic.github.io/tag/47cAf1nsEU/" class="tag">Linux</a>
                
              </span>
              <h1>华为云服务器配置</h1>
              <span class="meta">
                Posted on
                2024-11-29，8 min read
              </span>
            </div>
          
        
      </div>
    </div>
  </div>
</header>
  <!-- Post Content -->
  <article id="post-content-article">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto post-content-container">
          
          <h1 id="华为云服务器配置">华为云服务器配置</h1>
<p><ul class="markdownIt-TOC">
<li><a href="#%E5%8D%8E%E4%B8%BA%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE">华为云服务器配置</a>
<ul>
<li><a href="#mfa%E9%85%8D%E7%BD%AE">MFA配置</a></li>
<li><a href="#%E5%AE%89%E5%85%A8%E7%BB%84%E9%85%8D%E7%BD%AE">安全组配置</a></li>
<li><a href="#%E9%87%8D%E7%BD%AE%E5%AF%86%E7%A0%81">重置密码</a></li>
<li><a href="#ssh%E7%99%BB%E5%BD%95%E5%85%8D%E5%AF%86">ssh登录&amp;免密</a></li>
<li><a href="#%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF%E7%99%BB%E5%BD%95">宝塔面板登录</a></li>
<li><a href="#%E9%98%B2%E7%81%AB%E5%A2%99%E5%BC%80%E6%94%BE%E7%AB%AF%E5%8F%A3">防火墙开放端口</a></li>
<li><a href="#%E5%85%B6%E4%BB%96%E9%85%8D%E7%BD%AE">其他配置</a>
<ul>
<li><a href="#mysql">mysql</a></li>
<li><a href="#rustdesk">RustDesk</a></li>
<li><a href="#redis">Redis</a></li>
<li><a href="#localtunnel">localtunnel</a></li>
<li><a href="#gotify">gotify</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</p>
<p>最近把几个月前买的华为云服务器翻出来了，然后总是搞着搞着就把环境搞得一团糟干脆重装，反正就几分钟的事。顺便写个教程以后自己想再重装回来翻下。</p>
<h2 id="mfa配置">MFA配置</h2>
<p>如果你用过github，相信对2FA一定不陌生，而MFA和2FA差不多。简单来说，就是一个定时刷新的验证码。我们在进行一些敏感操作，如重设密码等需要频繁验证，这时MFA就会比收短信验证码或者邮箱验证码这类更方便些，当然MFA不是必须的，使用传统验证方式也行。<br>
在安全设置-敏感操作中绑定MFA。管理MFA可以使用华为云的官方app。我个人是Google爱好者，使用的是google authenticator，同时管理github在内多项MFA和2FA。</p>
<figure data-type="image" tabindex="1"><img src="https://jinvic.github.io/post-images/huaweicloud-server-config/pic2.png" alt="pic2" loading="lazy"></figure>
<figure data-type="image" tabindex="2"><img src="https://jinvic.github.io/post-images/huaweicloud-server-config/pic3.png" alt="pic3" loading="lazy"></figure>
<h2 id="安全组配置">安全组配置</h2>
<p>安全组配置简单来说就是允许哪些ip访问以及开放哪些端口。这个其实刚开始不用管，用默认安全组就行。之后如果添加了某些服务再加上就行。例如你在服务器上装了个，mysql就要开放3306。细节可以参考<a href="https://support.huaweicloud.com/usermanual-flexusl/security_admin_0004.html">官方文档</a>。<br>
要检查某个端口是否开放可以使用<code>netstat -an | grep 80</code>命令。</p>
<h2 id="重置密码">重置密码</h2>
<p>如果你不记得你的密码，可以在【实例概览-服务器操作-更多】中重置密码，只不过会有一个验证，这时之前设的MFA就排上用场了。如果没设MFA可以用手机或邮箱验证码。</p>
<figure data-type="image" tabindex="3"><img src="https://jinvic.github.io/post-images/huaweicloud-server-config/pic1.png" alt="pic1" loading="lazy"></figure>
<h2 id="ssh登录免密">ssh登录&amp;免密</h2>
<p>使用<code>ssh [用户名]@[服务器公网地址]</code>命令就可以远程登录服务器了。默认用户名是root，如果忘了密码可以<a href="#%E9%87%8D%E7%BD%AE%E5%AF%86%E7%A0%81%E5%8F%AF%E9%80%89">重置密码</a>。</p>
<p>如果觉得每次输密码太麻烦，可以配置免密登录。在本地计算机（<strong>不是服务器</strong>）上启动终端（window用cmd或powershell），<code>cd ~</code>来到用户目录下，一般为C:\User\用户名，<code>cd .ssh</code>进入.ssh文件夹，使用<code>ssh-keygen -t rsa</code>生成密钥，中途要求保存地址和密码不输直接回车也行。</p>
<p>查看可以发现多出了<code>id_rsa</code>和<code>id_rsa_pub</code>两个文件，分别是私钥和公钥。</p>
<figure data-type="image" tabindex="4"><img src="https://jinvic.github.io/post-images/huaweicloud-server-config/pic4.png" alt="pic4" loading="lazy"></figure>
<p>此时可以使用<code>ssh-copy-id</code>命令再次登录服务器将会将生成的公钥复制到服务器，但会覆盖源文件。也可以记事本打开公钥文件将内容手动粘贴到<code>/root/.ssh/authorized_keys</code>文件中。如果不会linux的文件操作，可以使用华为云网页自带的远程登录，自带一个文件树，双击打开后粘贴就行。</p>
<figure data-type="image" tabindex="5"><img src="https://jinvic.github.io/post-images/huaweicloud-server-config/pic5.png" alt="pic5" loading="lazy"></figure>
<figure data-type="image" tabindex="6"><img src="https://jinvic.github.io/post-images/huaweicloud-server-config/pic6.png" alt="pic6" loading="lazy"></figure>
<p>或者也可以使用echo命令写入，即<code>echo &quot;你的公钥内容&quot; &gt;&gt; ~/.ssh/authorized_keys</code>。</p>
<p>如上配置完成后再使用ssh命令登录就不需要输入密码了。</p>
<h2 id="宝塔面板登录">宝塔面板登录</h2>
<p>我买的Flexus L实例默认镜像是Ubuntu 22.04+宝塔面板。当然宝塔不是必要的，完全可以ssh登陆后自己敲命令装软件，不过为了方便还是先用着宝塔，以后可能会换别的管理软件。</p>
<p>宝塔面板的默认账密在<code>credentials/password.txt</code>中，可以使用<code>cat</code>命令查看。</p>
<figure data-type="image" tabindex="7"><img src="https://jinvic.github.io/post-images/huaweicloud-server-config/pic7.png" alt="pic7" loading="lazy"></figure>
<p>登录后会要你装些软件，选默认配置就行。之后要装什么也可以在软件商店装。</p>
<h2 id="防火墙开放端口">防火墙开放端口</h2>
<p>我在使用宝塔面板中安装了mysql，并在ssh登录的终端中成功登录。但是尝试使用公网ip外部登录时失败。这是因为除了安全组配置，还需要在服务器上开放防火墙对应端口。对于Ubuntu系统可以使用ufw命令管理防火墙。如下是一些常用命令。</p>
<ul>
<li>sudo ufw enable/disable 启用/禁用ufw</li>
<li>sudo ufw allow 80/tcp 开放特定端口，如果省略协议类型则同时允许tcp和udp</li>
<li>sudo ufw status 查看防火墙开放的端口 加个numbered可以看序号</li>
<li>sudo ufw delete [rule number] 删除某条规则</li>
<li>sudo ufw reload 重启防火墙</li>
</ul>
<p>如果开放端口还是无法连接，可能是mysql本身设置的问题，可以参考<a href="https://www.cnblogs.com/zhangxiaoxia/p/13043508.html">这里</a>，修改访问权限。不建议直接更改root，可以新建一个用户再赋权。</p>
<h2 id="其他配置">其他配置</h2>
<h3 id="mysql">mysql</h3>
<p>除了开放对应端口还需修改user表的host。</p>
<ol>
<li>使用<code>mysql -u root -p</code>登录。</li>
<li><code>use mysql;</code>选择mysql数据库。</li>
<li><code>select host,user from user</code>查看user表的host。一般这里root的host是localhost，也就是不允许从外部登录。这里个人不建议直接修改root。可以新建一个用户再赋权。</li>
<li><code>CREATE USER 'newuser'@'%' IDENTIFIED BY 'mypassword';</code>新建用户。</li>
<li><code>GRANT ALL PRIVILEGES ON *.* TO 'newuser'@'%';</code>赋予新用户所有权限。</li>
<li><code>FLUSH PRIVILEGES;</code>刷新权限。</li>
</ol>
<p>完成如上操作后，就可以使用新用户远程登录mysql数据库了。</p>
<h3 id="rustdesk">RustDesk</h3>
<p>RustDesk在宝塔的应用商店里有。先装Docker和Docker Compose，之后就可以一键安装RustDesk了。</p>
<p>安装RustDesk后要开放对应端口，<code>21115:21119/tcp</code>和<code>21116/udp</code>。防火墙和安全组都要配置。</p>
<p>服务安装后在docker-容器-hbbs-日志查看api key，ID服务器地址填自己服务器的公网地址就行。</p>
<figure data-type="image" tabindex="8"><img src="https://jinvic.github.io/post-images/huaweicloud-server-config/pic8.png" alt="pic8" loading="lazy"></figure>
<figure data-type="image" tabindex="9"><img src="https://jinvic.github.io/post-images/huaweicloud-server-config/pic9.png" alt="pic9" loading="lazy"></figure>
<h3 id="redis">Redis</h3>
<p>开放端口老生常谈了，略。</p>
<p>在redis的配置文件中也有一行<code>bind 127.0.0.1</code>，限定只能本地登录。可以注释掉这行或者换成自己的ip。</p>
<p>因为redis默认是不设账号密码的，所以一定要设置一下密码。在配置文件<code>/redis/redis.conf</code>中添加一行<code>requirepass mypassword</code>。如果还想设置用户名，可以使用<code>requireuser username</code>。</p>
<p>如果使用的是宝塔面板，也可以直接在设置中修改。</p>
<figure data-type="image" tabindex="10"><img src="https://jinvic.github.io/post-images/huaweicloud-server-config/pic10.png" alt="pic10" loading="lazy"></figure>
<h3 id="localtunnel">localtunnel</h3>
<p>localtunnel可以很方便地将本地服务暴露到公网。默认会使用localtunnel官方服务器，为了隐私和效率选择自建服务器。</p>
<p><strong>拉取项目</strong>：<a href="https://github.com/localtunnel/server">服务端</a>的gitbub地址，使用<code>git clone https://github.com/localtunnel/server.git</code>命令拉取时报错如下：</p>
<pre><code class="language-bash">error: RPC failed; curl 16 Error in the HTTP2 framing layer
fatal: expected flush after ref listing
</code></pre>
<p>在<a href="https://stackoverflow.com/questions/72987674/git-pull-error-rpc-failed-curl-16-error-in-the-http2-framing-layer-fatal-exp">stackoverflow</a>上看到解决方法，使用<code>git config --global http.version HTTP/1.1</code>强制git使用HTTP 1.1，之后可以使用<code>git config --global http.version HTTP/2</code>改回来。</p>
<p>刚打算试试，发现又好了。看来是github日常抽风，有空配下代理。</p>
<p><strong>安装并启动项目</strong>：拉取后的文件夹名为<code>server</code>，我为了方面管理改成了<code>localtunnel-server</code>。cd到这个目录下，使用<code>npm install</code>安装依赖，然后使用<code>node -r esm bin/server --port 1234</code>启动项目。端口可以自定义。</p>
<p>使用<code>nohup</code>可以在后台不挂起运行程序，退出终端不影响。</p>
<h3 id="gotify">gotify</h3>
<p>gotify是一个简单易部署的消息服务。</p>
<p><strong>服务端</strong>：使用docker部署gotify很方便。只需要一行命令就能完成。不过我们为了可用性还是使用docker-compose。首先新建一个文件夹作为项目位置，然后新建文件<code>docker-compose.yml</code>：</p>
<pre><code class="language-yml">services:
  gotify:
    image: gotify/server
    container_name: &quot;gotify&quot;
    restart: always
    ports:
      - 28818:80  #可以自定义要映射的端口
    environment:
      - GOTIFY_DEFAULTUSER_NAME=admin #默认账号
      - GOTIFY_DEFAULTUSER_PASS=admin  #默认密码，记得修改一下
    volumes:
      - &quot;./gotify_data:/app/data&quot;
</code></pre>
<p>然后<code>sudo docker-compose up -d</code>就行。记得开放设置的端口和安全组，之后就可以登录<code>&lt;ip&gt;:&lt;port&gt;</code>查看消息了。</p>
<p><strong>客户端</strong>：因为我的需求是转发验证码短信，使用的客户端为<a href="https://github.com/pppscn/SmsForwarder">SmsForwarder-短信转发器</a>。</p>
<p>在导航栏的apps标签中新建应用获取token，然后拼接服务器地址：<code>http://&lt;ip&gt;:&lt;port&gt;/message?token=&lt;apptoken&gt;</code>填入WebServer，测试成功。</p>
<figure data-type="image" tabindex="11"><img src="https://jinvic.github.io/post-images/huaweicloud-server-config/pic11.png" alt="pic11" loading="lazy"></figure>

          <div class="toc-container"><ul class="markdownIt-TOC">
<li><a href="#%E5%8D%8E%E4%B8%BA%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE">华为云服务器配置</a>
<ul>
<li><a href="#mfa%E9%85%8D%E7%BD%AE">MFA配置</a></li>
<li><a href="#%E5%AE%89%E5%85%A8%E7%BB%84%E9%85%8D%E7%BD%AE">安全组配置</a></li>
<li><a href="#%E9%87%8D%E7%BD%AE%E5%AF%86%E7%A0%81">重置密码</a></li>
<li><a href="#ssh%E7%99%BB%E5%BD%95%E5%85%8D%E5%AF%86">ssh登录&amp;免密</a></li>
<li><a href="#%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF%E7%99%BB%E5%BD%95">宝塔面板登录</a></li>
<li><a href="#%E9%98%B2%E7%81%AB%E5%A2%99%E5%BC%80%E6%94%BE%E7%AB%AF%E5%8F%A3">防火墙开放端口</a></li>
<li><a href="#%E5%85%B6%E4%BB%96%E9%85%8D%E7%BD%AE">其他配置</a>
<ul>
<li><a href="#mysql">mysql</a></li>
<li><a href="#rustdesk">RustDesk</a></li>
<li><a href="#redis">Redis</a></li>
<li><a href="#localtunnel">localtunnel</a></li>
<li><a href="#gotify">gotify</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
          
          <hr />
          <p class="next-post">下一篇：
            <a href="https://jinvic.github.io/post/kratos-quick-start-practice/">
              <span class="post-title">
                Kratos 快速入门实践&rarr;
              </span>
            </a>
          </p>
          
          <div class="comment" style="text-align: center;">
            

            
            
            
            <!-- <script src='https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js'></script> -->
<script src='//unpkg.com/@waline/client@v2/dist/waline.js'></script>
<link href='//unpkg.com/@waline/client@v2/dist/waline.css' rel='stylesheet' />

<!-- <style>
	div#vcomments{
		width:100%;
		max-width: 1000px;
		padding: 2.5%
	}
</style> -->

<!--  -->

	<div id="wcomments"></div>

<script>
	// new Valine({
	Waline.init({
		el: '#wcomments',
		serverURL: 'personal-blog-comments.vercel.app',
		login: 'enable',
		wordLimit: 300,
		pageSize: 10,
		reaction: true,
		
	});
</script>

            
          </div>
        </div>
      </div>
  </article>
  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <ul class="list-inline text-center">
            
            
            <li class="list-inline-item">
              <a href="https://github.com/Jinvic" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
            
              
            
              
            
              
            
              
            
              
            
              
            
              
              <!-- <li class="list-inline-item">
              <a href="https://jinvic.github.io/atom.xml" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                </span>
              </a>
              </li> -->
          </ul>
          <p class="copyright text-muted">Copyright &copy;<span>Jinvic&#39;s Blog</span><br><a href="https://github.com/getgridea/gridea" class="Themeinfo">Powered by Gridea</a></p>
        </div>
      </div>
    </div>
   </footer>
  <!-- Bootstrap core JavaScript -->
  <script src="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
  <!-- <script src="https://jinvic.github.io/media/scripts/bootstrap.bundle.min.js"></script> -->
  <!-- Bootstrap core JavaScript -->
  <script src="https://cdn.jsdelivr.net/gh/Alanrk/clean-cdn@1.0/scripts/clean-blog.min.js"></script>
  <!-- <script src="https://jinvic.github.io/media/scripts/clean-blog.min.js"></script> -->
  <script src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
  <style type="text/css">a.back_to_top{text-decoration:none;position:fixed;bottom:40px;right:30px;background:#f0f0f0;height:40px;width:40px;border-radius:50%;line-height:36px;font-size:18px;text-align:center;transition-duration:.5s;transition-propety:background-color;display:none}a.back_to_top span{color:#888}a.back_to_top:hover{cursor:pointer;background:#dfdfdf}a.back_to_top:hover span{color:#555}@media print,screen and(max-width:580px){.back_to_top{display:none!important}}</style>
<a id="back_to_top" href="#" class="back_to_top">
  <span>▲</span></a>
<script>$(document).ready((function(_this) {
    return function() {
      var bt;
      bt = $('#back_to_top');
      if ($(document).width() > 480) {
        $(window).scroll(function() {
          var st;
          st = $(window).scrollTop();
          if (st > 30) {
            return bt.css('display', 'block')
          } else {
            return bt.css('display', 'none')
          }
        });
        return bt.click(function() {
          $('body,html').animate({
            scrollTop: 0
          },
          800);
          return false
        })
      }
    }
  })(this));</script>
  
  <div id="landlord-parent">
    <div id="landlord">
        <div class="message" style="opacity:0"></div>
        <canvas id="live2d" width="200" height="300" class="live2d"></canvas>
    </div>
</div>

<script type="text/javascript">
    if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {
        //移动端
        console.log("------ 移动端");
    } else {
        console.log("------ PC端 " + navigator.userAgent);

        addScript("https://cdn.jsdelivr.net/gh/850552586/ericamcdn@0.1/js/live2d.js", () => {
            // 加载完成后再loadlive2d
            loadlive2d("live2d", "https://jinvic.github.io/media/live2d/assets/koharu.model.json");
        });

        var home_Path = "https://jinvic.github.io/";
        addScript("https://jinvic.github.io/media/live2d/js/message.js", () => { });
    }

    // 插入js文件，完成后callback
    function addScript(jsfile, callback) {
        var landlord_parent = document.getElementById("landlord-parent");
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = jsfile;
        landlord_parent.appendChild(script);
        script.onload = script.onreadystatechange = function () {
            if (!this.readyState || this.readyState === "loaded" || this.readyState === "complete") {
                script.onload = script.onreadystatechange = null;
                if (callback && typeof callback == "function") {
                    callback(); //window[callback]();如果传递字符串过来 调用window['函数名']() 调用方法
                }
            }
        };
    }
</script>
  
  <script src="https://jinvic.github.io/media/scripts/tocScript.js"></script>
</body>

</html>